<!doctype html>
<html>
<head>
    <title>NodeJS socket live notification demo</title>
    <meta charset="utf-8">
</head>
<body>
<button type="button" onclick="sendMessage()">Update user</button>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.2.0/socket.io.js" integrity="sha512-WL6WGKMPBiM9PnHRYIn5YEtq0Z8XP4fkVb4qy7PP4vhmYQErJ/dySyXuFIMDf1eEYCXCrQrMJfkNwKc9gsjTjA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.2/js/toastr.min.js"></script>
<script src="/socket.io/socket.io.js"></script>

<script>
    const socket = io('http://localhost:5000');
    toastr.options = {
        "debug": false,
        "positionClass": "toast-top-right",
        "onclick": null,
        "fadeIn": 300,
        "fadeOut": 1000,
        "timeOut": 5000,
        "extendedTimeOut": 1000
    };

    socket.on('new-notification', (resp) => {
        toastr.success(resp, 'New notification')
    });

    function sendMessage() {
        console.log('clk')
        let msg = 'user updated'
        if(msg.trim() !== '') {
            socket.emit("send-notification", msg);
        }

    }
</script>
</body>
</html>
